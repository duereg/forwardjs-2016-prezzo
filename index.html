<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ES2015 today</title>
    <link rel="stylesheet" type="text/css" href="build/build.css">
  </head>
  <body>
    <article class="us-hero">
      <section data-bespoke-hash="javascript-today">
        <h1>JavaScript today</h1>
        <h3>How we got here, where we are, what's next</h3>
        <h3>Powered by <a href="http://tech.opentable.com/">OpenTable Engineering</a></h3>
        <h4>Matt Blair</h4>
        <h5>Principal Software Engineer, Search Platform</h5>
        <h5>mblair@opentable.com</h5>
      </section>
      <section data-bespoke-hash="ancient-history">
        <h2>Ancient History</h2>
        <ul>
          <li><span class="date">Dec 1999</span><span class="event">ES3 Released</span></li>
          <li><span class="date">Jan 2000</span><span class="event">ES4 work started*</span></li>
          <li><span class="date">Oct 2007</span><span class="event">Microsoft goes on attack</span></li>
          <li><img src="images/bullshit.jpg" /></li>
          <li><img src="images/popcorn.gif" /></li>
          <li><span class="date">Aug 2008</span><span class="event">ES4 scaled back to "harmony project"</span></li>
          <li><span class="date">Dec 2009</span><span class="event">strict mode, new features released</span></li>
          <li><span class="date">Jun 2011</span><span class="event">ES5 Released</span></li>
          <li><span class="date">Nov 2013</span><span class="event">The beginning of the end of Joyent and node.js</span></li>
          <li><span class="date">Dec 2013</span><span class="event">Ben Noordhuis (#3) stops contributing to node.js</span></li>
          <li><span class="date">Dec 2013</span><span class="event">Isaac Schlueter (#2) leaves Joyent</span></li>
          <li><img src="images/popcorn2.gif" /></li>
        </ul>
      </section>
      <section data-bespoke-hash="modern-history">
        <h2>Modern History</h2>
        <ul>
          <li><span class="date">Sep 2014</span><span class="event">First commit to 6to5 project</span></li>
          <li><span class="date">Nov 2014</span><span class="event">Fedor Indutny forks node.js into io.js</span></li>
          <li><img src="images/eddie-izzard-popcorn-gif-o.gif" /></li>
          <li><span class="date">Jan 2015</span><span class="event">io.js v1, TC39 moves to annual releases (ES2015)</span></li>
          <li><span class="date">Feb 2015</span><span class="event">babel v4 - 6to5 renamed</span></li>
          <li><span class="date">Apr 2015</span><span class="event">babel v5 - ES7!!!</span></li>
          <li><span class="date">May 2015</span><span class="event">io.js v2</span></li>
          <li><span class="date">Jun 2015</span><span class="event">ES6/ES2015 Spec Released</span></li>
          <li><span class="date">Aug 2015</span><span class="event">io.js v3</span></li>
          <li><span class="date">Sep 2015</span><span class="event">io.js v3.3.1, npm v4</span></li>
          <li><span class="date">Oct 2015</span><span class="event">npm v5, babel v6</span></li>
          <li><span class="date">Jan 2016</span><span class="event">Chrome 4.9 - 91% ES 2015 support</span></li>
        </ul>
      </section>
      <section data-bespoke-hash="browsers">
        <h2>Where we are - Browsers</h2>
        <ul>
          <li><span class="date">Chrome 49+</span><span class="event">91%</span></li>
          <li><span class="date">FF 45</span><span class="event">85%</span></li>
          <li><span class="date">Edge 13</span><span class="event">83%</span></li>
          <li><span class="date">WebKit</span><span class="event">83%</span></li>
          <li><span class="date">Safari 9</span><span class="event">54%</span></li>
        </ul>
      </section>
      <section data-bespoke-hash="runtimes">
        <h2>Where we are - Runtimes</h2>
        <ul>
          <li><span class="date">XS6</span><span class="event">97%</span></li>
          <li><span class="date">EchoJS</span><span class="event">66%</span></li>
          <li><span class="date">Node 5.0</span><span class="event">57%</span></li>
          <li><span class="date">Node 4.0</span><span class="event">52%</span></li>
          <li><span class="date">Node 0.12</span><span class="event">17%</span></li>
        </ul>
      </section>
      <section data-bespoke-hash="compilers">
        <h2>Where we are - Compilers</h2>
        <ul>
          <li><span class="date">Babel</span><span class="event">76%</span></li>
          <li><span class="date">Traceur</span><span class="event">59%</span></li>
          <li><span class="date">TypeScript</span><span class="event">56%</span></li>
          <li><span class="date">Closure</span><span class="event">31%</span></li>
          <li><span class="date">JSX</span><span class="event">20%</span></li>
        </ul>
      </section>
      <section data-bespoke-hash="going-forward">
        <h2>Examples</h2><img src="images/Compiler-Ignores-Comments.jpg" height="400px" />
      </section>
      <section data-bespoke-hash="what-works-everywhere-syntax">
        <h2>What Works Everywhere?</h2>
        <h3>Syntax</h3>
        <ul>
          <li>let</li>
          <li>const</li>
          <li>Arrow Functions</li>
          <li>Object Literal Extensions</li>
          <li>String Templates</li>
        </ul>
      </section>
      <section data-bespoke-hash="let">
        <h2>let</h2>
        <pre><code class="language-javascript">function varTest() {
  var x = 31;
  if (true) {
    var x = 71;  // same variable!
    console.log(x);  // 71
  }
  console.log(x);  // 71
}
</code></pre>
      </section>
      <section data-bespoke-hash="let-2">
        <h2>let</h2>
        <pre><code class="language-javascript">function letTest() {
  let x = 31;
  if (true) {
    let x = 71;  // different variable
    console.log(x);  // 71
  }
  console.log(x);  // 31
}
</code></pre>
      </section>
      <section data-bespoke-hash="let-3">
        <h2>let errors</h2>
        <pre><code class="language-javascript">if (x) {
  let foo;
  let foo; // TypeError thrown.
}

function do_something() {
  console.log(foo); // ReferenceError
  let foo = 2;
}
</code></pre>
      </section>
      <section data-bespoke-hash="const">
        <h2>const</h2>
        <pre><code class="language-javascript">const MY_FAV = 7;
MY_FAV = 20; //fails FF, Chrome, not Safari

console.log("my favorite number is: " + MY_FAV); // 7

const MY_FAV = 20; //throws
var MY_FAV = 20; //throws

console.log("my favorite number is " + MY_FAV); // 7
</code></pre>
      </section>
      <section data-bespoke-hash="const-2">
        <h2>const</h2>
        <pre><code class="language-javascript">const FOO; // SyntaxError: missing = in const declaration
const MY_OBJECT = {"key": "value"}; // works

//fails FF, Chrome, not Safari
MY_OBJECT = {"OTHER_KEY": "value"};

// Object attributes are not protected
MY_OBJECT.key = "otherValue";
</code></pre>
      </section>
      <section data-bespoke-hash="arrow-functions">
        <h2>Arrow Functions</h2>
        <pre><code class="language-javascript">(param1, param2, …, paramN) => { statements }
(param1, param2, …, paramN) => expression
         // equivalent to:  => { return expression; }
         
// Parentheses are optional when there's one parameter
(singleParam) => { statements }
singleParam => { statements }

// A function with no parameters requires parentheses
() => { statements }
</code></pre>
      </section>
      <section data-bespoke-hash="object-literals">
        <h2>Object Literal Extensions</h2>
        <pre><code class="language-javascript">var a = 103;
var foo = 'bar'
var obj = {
  a, //object shorthand
  m(z) {return z + this.a}, // function shorthand
  [bar]: 104, // foo: 104
  get [Math.random()]() {return this.a}, //
}
</code></pre>
      </section>
      <section data-bespoke-hash="string templates">
        <h2>String Templating</h2>
        <pre><code class="language-javascript">console.log("string text line 1\n string text line 2");
===
console.log(`string text line 1
string text line 2`);

var a = 5, b = 10;
console.log(`Fifteen is ${a + b} and\nnot ${2 * a + b}.`);
</code></pre>
      </section>
      <section data-bespoke-hash="what-works-everywhere-ds">
        <h2>What Works Everywhere?</h2>
        <h3>Data Structures</h3>
        <ul>
          <li>Set</li>
          <li>Map</li>
          <li>WeakSet</li>
          <li>WeakMap</li>
          <li>Symbol</li>
          <li>Promise</li>
        </ul>
      </section>
      <section data-bespoke-hash="set">
        <h2>Set</h2>
        <pre><code class="language-javascript">let s = new Set()
s.add("hello").add("goodbye").add("hello")
s.size === 2
s.has("hello") === true
for (let key of s.values()) // insertion order
  console.log(key)
  </code></pre>
      </section>
      <section data-bespoke-hash="map">
        <h2>Map</h2>
        <pre><code class="language-javascript">let m = new Map()
m.set("hello", 42)
m.set(s, 34)
m.get(s) === 34
m.size === 2
for (let [ key, val ] of m.entries())
    console.log(key + " = " + val)
    </code></pre>
      </section>
      <section data-bespoke-hash="weakset">
        <h2>WeakSet</h2>
        <pre><code class="language-javascript">let thingToDelete = {};
let ws = new WeakSet()
ws.set(thingToDelete) //cannot be primitive
ws.has(thingToDelete) === true
thingToDelete = null;
ws.has(thingToDelete) === false
</code></pre>
      </section>
      <section data-bespoke-hash="weakmap">
        <h2>WeakMap</h2>
        <pre><code class="language-javascript">let thingToDelete = {};
let wm = new WeakMap()
wm.set(thingToDelete, 42) //cannot be primitive
wm.get(thingToDelete) === 42
thingToDelete = null;
wm.has(thingToDelete) === false
wm.get(thingToDelete) === undefined
</code></pre>
      </section>
      <section data-bespoke-hash="symbol">
        <h2>Symbol</h2>
        <pre><code class="language-javascript">Symbol("foo") !== Symbol("foo")
const foo = Symbol()
const bar = Symbol()
typeof foo === "symbol"
typeof bar === "symbol"
let obj = {}
obj[foo] = "foo"
obj[bar] = "bar"
JSON.stringify(obj) // {}
Object.keys(obj) // []
</code></pre>
      </section>
      <section data-bespoke-hash="symbol-rage">
        <h2>Symbol</h2><img src='images/oop-in-js.jpg' height="400px" />
      </section>
      <section data-bespoke-hash="promise">
        <h2>Promise</h2>
        <ul>
          <li><img src="images/promises.png" width="400px" /></li>
          <li><img src="images/DoYouEvenCodeBro.jpg" height="400px" /></li>
        </ul>
      </section>
      <section data-bespoke-hash="what-else">
        <h2>What else?</h2>
        <ul>
          <li>class</li>
          <li>super</li>
          <li>generators</li>
        </ul>
      </section>
      <section data-bespoke-hash="what-am-I-missing">
        <h2>What are we missing?</h2>
        <ul>
          <li>Proxies</li>
          <li>Destructuring</li>
          <li>subclassing Array, Function, etc</li>
        </ul>
      </section>
      <section data-bespoke-hash="es6-options">
        <h2>What are my options?</h2>
        <ul>
          <li><b>Client SPA in Chrome 49+</b>
            <ul>
              <li>91% of ES6</li>
              <li>Proxies, Destructuring, subclassing</li>
              <li>no module import/export</li>
            </ul>
          </li>
          <li><b>IofT Application using XS6</b>
            <ul>
              <li>97% of ES6</li>
              <li>limited to Kinoma hardware</li>
            </ul>
          </li>
          <li><b>Node 4/5 App with Babel</b>
            <ul>
              <li>75% of ES6</li>
              <li>Destructuring</li>
              <li>ES7 support (async, await)</li>
              <li>JSX, TypeScript, Flow, etc</li>
            </ul>
          </li>
        </ul>
      </section>
      <section data-bespoke-hash="es6-options">
        <h2>Thanks!</h2>
        <h3>For more information:</h3>
        <ul>
          <li>http://kangax.github.io/compat-table/es6/</li>
          <li>http://es6-features.org/</li>
          <li>http://blog.mattblair.co/forwardjs-2016-prezzo</li>
          <li>https://github.com/duereg/forwardjs-2016-prezzo</li>
        </ul>
      </section>
    </article>
    <div class="logo"></div>
    <script src="build/build.js"></script>
  </body>
</html>