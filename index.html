<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ES2015 today</title>
    <link rel="stylesheet" type="text/css" href="build/build.css">
  </head>
  <body>
    <article class="us-hero">
      <section data-bespoke-hash="javascript-today">
        <h1>JavaScript today</h1>
        <h3>Where we are, where we're going, what's next</h3>
        <h3>Powered by <a href="http://tech.opentable.com/">OpenTable Engineering</a></h3>
        <h4>Matt Blair</h4>
        <h5>Principal Software Engineer, Search Platform</h5>
        <h5>mblair@opentable.com</h5>
        <h5>&nbsp;</h5>
        <h5>http://blog.mattblair.co/forwardjs-2016-prezzo</h5>
        <h5>https://github.com/duereg/forwardjs-2016-prezzo</h5>
      </section>
      <section data-bespoke-hash="browsers">
        <h2>Where we are - Browsers</h2>
        <ul>
          <li><span class="date">Chrome 49+, Opera 36+</span><span class="event">91%</span></li>
          <li><span class="date">FF 45</span><span class="event">85%</span></li>
          <li><span class="date">Edge 13</span><span class="event">83%</span></li>
          <li><span class="date">Safari 9</span><span class="event">54%</span></li>
        </ul>
      </section>
      <section data-bespoke-hash="transpilers">
        <h2>Where we are - Transpilers</h2>
        <ul>
          <li><span class="date">Babel 6.4.6</span><span class="event">76%</span></li>
          <li><span class="date">Traceur 0.0.102</span><span class="event">59%</span></li>
          <li><span class="date">TypeScript 1.7.5</span><span class="event">56%</span></li>
          <li><span class="date">Closure v20160125</span><span class="event">31%</span></li>
          <li><span class="date">JSX 0.9.89</span><span class="event">20%</span></li>
        </ul>
      </section>
      <section data-bespoke-hash="going-forward">
        <h2>Examples</h2><img src="images/Compiler-Ignores-Comments.jpg" height="400px" />
      </section>
      <section data-bespoke-hash="what-works-everywhere-syntax">
        <h2>What Works Everywhere?</h2>
        <h3>Syntax</h3>
        <ul>
          <li>* Some environments require a 'use strict' statement</li>
          <li><b>let</b></li>
          <li><b>const</b></li>
          <li>Arrow Functions</li>
          <li>Object Literal Extensions</li>
          <li>String Templates</li>
        </ul>
      </section>
      <section data-bespoke-hash="let">
        <h2>let</h2>
        <pre><code class="language-javascript">function varTest() {
  var x = 31;
  if (true) {
    var x = 71;  // same variable!
    console.log(x);  // 71
  }
  console.log(x);  // 71
}
</code></pre>
      </section>
      <section data-bespoke-hash="let-2">
        <h2>let</h2>
        <pre><code class="language-javascript">function letTest() {
  let x = 31;
  if (true) {
    let x = 71;  // different variable
    console.log(x);  // 71
  }
  console.log(x);  // 31
}
</code></pre>
      </section>
      <section data-bespoke-hash="let-3">
        <h2>let errors</h2>
        <pre><code class="language-javascript">if (x) {
  let foo;
  let foo; // TypeError thrown.
}

function do_something() {
  console.log(foo); // ReferenceError
  let foo = 2;
}
</code></pre>
      </section>
      <section data-bespoke-hash="const">
        <h2>const</h2>
        <pre><code class="language-javascript">const MY_FAV = 7;
MY_FAV = 20; //fails FF, Chrome, not Safari

console.log("my favorite number is: " + MY_FAV); // 7

const MY_FAV = 20; //throws
var MY_FAV = 20; //throws

console.log("my favorite number is " + MY_FAV); // 7
</code></pre>
      </section>
      <section data-bespoke-hash="const-2">
        <h2>const</h2>
        <pre><code class="language-javascript">const FOO; // SyntaxError: missing = in const declaration
const MY_OBJECT = {"key": "value"}; // works

//fails FF, Chrome, not Safari
MY_OBJECT = {"OTHER_KEY": "value"};

// Object attributes are not protected
MY_OBJECT.key = "otherValue";
</code></pre>
      </section>
      <section data-bespoke-hash="arrow-functions">
        <h2>Arrow Functions</h2>
        <pre><code class="language-javascript">// Arrow functions are all bound to this
(a1, a2, aN) => { foos } // function(a1, a2, aN) { foos }
// implicit return
(a1, a2, aN) => foo      // function(a1, a2, aN) { return foo }

// Parentheses are optional when there's one parameter
(singleParam) => { statements }
singleParam => { statements }
</code></pre>
      </section>
      <section data-bespoke-hash="object-literals">
        <h2>Object Literal Extensions</h2>
        <pre><code class="language-javascript">var a = 103, bar = 'foo'
var obj = {
  a: a,
  m: function(z) {return z + this.a},
}
obj[bar] = 104 // obj.foo
Object.defineProperty(obj, bar + a, {
  get: function() {return this.a() },
}) //obj.foo103
</code></pre>
      </section>
      <section data-bespoke-hash="object-literals-2">
        <h2>Object Literal Extensions</h2>
        <pre><code class="language-javascript">var a = 103, bar = 'foo'
var randomName = Math.random()
var obj = {
  a, //object shorthand
  m(z) {return z + this.a}, // function shorthand
  [bar]: 104, // Computed Property Names
  get [bar + a]() {return this.a}
}
</code></pre>
      </section>
      <section data-bespoke-hash="string templates">
        <h2>String Templating</h2>
        <pre><code class="language-javascript">console.log("string text line 1\n string text line 2");
===
console.log(`string text line 1
string text line 2`);

var a = 5, b = 10;
console.log(`Fifteen is ${a + b} and\nnot ${2 * a + b}.`);
</code></pre>
      </section>
      <!-- 14 minutes at this point-->
      <section data-bespoke-hash="what-works-everywhere-ds">
        <h2>What Works Everywhere?</h2>
        <h3>Data Structures</h3>
        <ul>
          <li>Set</li>
          <li>Map</li>
          <li>WeakSet</li>
          <li>WeakMap</li>
          <li>Symbol</li>
          <li>Promise</li>
        </ul>
      </section>
      <section data-bespoke-hash="set">
        <h2>Set</h2>
        <pre><code class="language-javascript">let s = new Set()
s.add("hello").add("goodbye").add("hello")
s.size === 2
s.has("hello") === true
for (let key of s.values()) // insertion order
  console.log(key)
  </code></pre>
      </section>
      <section data-bespoke-hash="map">
        <h2>Map</h2>
        <pre><code class="language-javascript">let m = new Map()
m.set("hello", 42)
m.set(s, 34)
m.get(s) === 34
m.size === 2
for (let [ key, val ] of m.entries())
    console.log(key + " = " + val)
    </code></pre>
      </section>
      <section data-bespoke-hash="weakset">
        <h2>WeakSet</h2>
        <pre><code class="language-javascript">let thingToDelete = {};
let ws = new WeakSet()
ws.set(thingToDelete) //cannot be primitive
ws.has(thingToDelete) === true
thingToDelete = null;
ws.has(thingToDelete) === false
</code></pre>
      </section>
      <section data-bespoke-hash="weakmap">
        <h2>WeakMap</h2>
        <pre><code class="language-javascript">let thingToDelete = {};
let wm = new WeakMap()
wm.set(thingToDelete, 42) //cannot be primitive
wm.get(thingToDelete) === 42
thingToDelete = null;
wm.has(thingToDelete) === false
wm.get(thingToDelete) === undefined
</code></pre>
      </section>
      <section data-bespoke-hash="symbol">
        <h2>Symbol</h2>
        <pre><code class="language-javascript">Symbol("foo") !== Symbol("foo")
const foo = Symbol()
const bar = Symbol()
typeof foo === "symbol"
typeof bar === "symbol"
let obj = {}
obj[foo] = "foo"
obj[bar] = "bar"
JSON.stringify(obj) // {}
Object.keys(obj) // []
</code></pre>
      </section>
      <section data-bespoke-hash="promise">
        <h2>Promise</h2>
        <ul>
          <li><img src="images/promises.png" width="400px" /></li>
        </ul>
      </section>
      <!-- 16 minutes, rushing, not going over code-->
      <section data-bespoke-hash="what-else">
        <h2>What else is there?</h2>
        <ul>
          <li>class</li>
          <li>super</li>
          <li>generators</li>
        </ul>
      </section>
      <section data-bespoke-hash="what-am-I-missing">
        <h2>What are we missing?</h2>
        <ul>
          <li>Proxies</li>
          <li>Destructuring</li>
          <li>Subclassing Array, Function, etc</li>
        </ul>
      </section>
      <section data-bespoke-hash="es6-options">
        <h2>What are my options?</h2>
        <ul>
          <li><b>Client SPA in Chrome 49+</b>
            <ul>
              <li>91% of ES6</li>
              <li>Proxies, Destructuring, subclassing</li>
              <li>no module import/export</li>
            </ul>
          </li>
          <li><b>IofT Application using XS6 Runtime</b>
            <ul>
              <li>97% of ES6</li>
              <li>limited to Kinoma hardware</li>
            </ul>
          </li>
          <li><b>Node 4/5 App, Transpiled with Babel</b>
            <ul>
              <li>75% of ES6</li>
              <li>Destructuring, Module Import/Export</li>
              <li>ES7 support (async, await)</li>
              <li>JSX, TypeScript, Flow, etc</li>
            </ul>
          </li>
        </ul>
      </section>
      <section data-bespoke-hash="thanks">
        <h2>Thanks!</h2>
        <h3>For more information:</h3>
        <ul>
          <li>http://kangax.github.io/compat-table/es6/</li>
          <li>http://es6-features.org/</li>
          <li>http://blog.mattblair.co/forwardjs-2016-prezzo</li>
          <li>https://github.com/duereg/forwardjs-2016-prezzo</li>
        </ul>
      </section>
    </article>
    <script src="build/build.js"></script>
  </body>
</html>